<mat-tab-group #tabGroup class="fill-height" >

  <mat-tab label="Diagram View">
    <ng-template matTabContent>
      <div class="flex-grow flex-grow-column max-height">
        <app-loading-info [loading]="isLongLoading()"></app-loading-info>
        <app-pipeline-view
          [pipelineDefinition]="selectedPipeline"
        ></app-pipeline-view>
      </div>
    </ng-template>
  </mat-tab>

  <mat-tab label="Pipeline">
    <ng-template matTabContent>
      <div class="flex-grow flex-grow-column max-height">
        <app-loading-info [loading]="isLongLoading()"></app-loading-info>
        <app-pipeline-editor #editor
                             [pipelineId]="selectedPipeline.id"
                             [raw]="rawPipelineDefinition"
                             [error]="rawPipelineDefinitionError"
                             [success]="rawPipelineDefinitionSuccess"
                             (check)="checkPipelineDefinition($event)"
                             (update)="updatePipelineDefinition($event, editor)">
        </app-pipeline-editor>
      </div>
    </ng-template>
  </mat-tab>

  <mat-tab label="Settings">
    <ng-template matTabContent>
      <app-loading-info [loading]="isLongLoading()"></app-loading-info>
      <h3 [ngStyle]="{'color':'grey', 'margin-left':'20px'}">General</h3>

      <div class="stage-control-item">
        <label>Pipeline Name</label>
        <mat-form-field>
          <input #nameEntered matInput name="name" [value]="selectedPipeline.name">
        </mat-form-field>
        <button mat-stroked-button
                [disabled]="(nameEntered.value == selectedPipeline.name)"
                color="primary"
                (click)="setName(nameEntered.value)">
          Update
        </button>
      </div>

      <h3 [ngStyle]="{'color':'grey', 'margin-left':'20px'}">Group Access</h3>
        <div class="stage-control-item">
          <label>Group Assignment</label>
          <app-group-assignment [currentlyAssignedGroups]="mockGroups"
                                (groupAssignmentRemovedEmitter)="null"
          [ngStyle]="{'width': '80%'}">
          </app-group-assignment>
        </div>



      <div class="stage-control-item whitespace-separator-top"><!--Delete Button-->
        <button class="whitespace-separator-top"
                mat-raised-button
                color="warn"
                (click)="delete()">
          Delete Pipeline
        </button>
      </div><!--Delete Button-->
    </ng-template>

  </mat-tab>
</mat-tab-group>
