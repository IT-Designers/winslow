<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
<div class="group-assignment-container">
  <div class="label-and-chiplist-container">
    <label class="chiplist-label">Group Access</label>
    <div class="chiplist-container">
      <mat-chip-list *ngIf="currentlyAssignedGroups.length > 0">
        <mat-chip *ngFor="let group of currentlyAssignedGroups"
                  [style.background-color]="getChipColor(group)"
                  [matTooltip]="getTooltip(group)"
                  matTooltipShowDelay="250"
                  (click)="changeGroupListBtnTextAndIcon()"
                  (removed)="remove(group)">
          {{group.name}}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>
      </mat-chip-list>
      <label *ngIf="currentlyAssignedGroups.length < 1" [ngStyle]="{'font-style':'italic'}">
        No groups assigned
      </label>
      <button mat-raised-button color="primary" #groupTagsButton
              (click)="changeGroupListBtnTextAndIcon()">
        <!--{{groupListBtnText}}-->
        <mat-icon>{{groupListBtnIcon}}</mat-icon>
      </button>
    </div>
  </div>



  <div class="list-and-label-container" *ngIf="showGroupList">
    <div class="list-content" id="list-content">
      <input type="text"
             class="text-input"
             [(ngModel)]="groupSearchInput"
             placeholder="Search.."
             (keyup)="filterFunction()">
      <div class="scrollable">
        <!-- ---------- Version with seperate remove button ---------- -->
        <div *ngIf="displayGroups.length > 0">
          <div class="list-item" *ngFor="let group of displayGroups">
            <div class="username-label">
              <mat-chip [style.background-color]="getChipColor(group)"
                        [matTooltip]="getTooltip(group)"
                        matTooltipShowDelay="250">
                {{group.name}}
              </mat-chip>
            </div>
            <mat-form-field appearance="fill" class="role-dropdown">
              <mat-label>Choose Role</mat-label>
              <mat-select class="role-select" [(value)]="group.role" (selectionChange)="roleChanged(group)">
                <mat-option *ngFor="let role of roles" value="{{role}}">{{role}}</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="btn-container">
              <button mat-raised-button
                      class="remove-member-button"
                      color="warn"
                      (click)="onRemoveItemClick(group)">
                <!--<span class="material-symbols-outlined item-icon">group_remove</span>-->
                Remove
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="displayGroups.length === 0" class="list-item">
          <label class="no-groups-label">No groups assigned</label>
        </div>

      </div>
      <div class="add-member-button-container">
        <button class="mat-raised-button"
                mat-raised-button=""
                color="primary"
                (click)="openAddGroupDialog()">
          Add Group
        </button>
      </div>
    </div>
  </div>
</div>


