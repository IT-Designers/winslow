<div *ngFor="let envVar of environmentVariables | keyvalue" class="action-row">
  <mat-label class="title">{{envVar.key}}</mat-label>
  <mat-form-field [formGroup]="formGroupEnv">
    <input #value matInput
           [required]="envVar.value[0]"
           [value]="envVar.value[1]"
           [formControlName]="envVar.key"
           (keyup)="updateValid()"
           name="{{envVar.key}}">
  </mat-form-field>
  <div class="controls">
    <button mat-icon-button color="primary" (click)="browseForValue(value)">
      <mat-icon class="material-icons-outlined">folder</mat-icon>
    </button>
    <button mat-icon-button color="primary"
            (click)="value.value = envVar.value[1]; formGroupEnv.value[value.name] = envVar.value[1]; updateValid()"
            [disabled]="value.value == envVar.value[1]">
      <mat-icon class="material-icons-outlined">undo</mat-icon>
    </button>
    <button mat-icon-button color="warn" [disabled]="envVar.value[0]"
            [matTooltip]="envVar.value[0] ? 'This value is required' : null"
            (click)="delete(envVar.key)">
      <mat-icon>delete</mat-icon>
    </button>
  </div>
</div>
<div class="action-row">
  <mat-form-field class="title">
    <input matInput placeholder="Name" #name (keyup.enter)="name.value.length > 0 && value.focus()">
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Value" #value (keyup.enter)="button.disabled || add(name, value)">
  </mat-form-field>
  <div class="controls">
    <button dense mat-icon-button color="primary" (click)="browseForValue(value)">
      <mat-icon class="material-icons-outlined">folder</mat-icon>
    </button>
    <button dense mat-raised-button color="primary" #button
            [disabled]="name.value.trim().length == 0 || value.value.trim().length == 0"
            (click)="add(name, value)">
      Add
    </button>
  </div>
</div>
