<app-loading-info [error]="loadError ? loadError.message : null" [loading]="projects == null"></app-loading-info>

<div class="container auto-full-height">
  <div *ngIf="projects != null" class="project-selection-sidebar-container">
    <mat-card class="project-selection-sidebar">
      <div *ngIf="projects != null && projects.length == 0" class="none-defined-yet">
        <i>There are no projects yet</i>
      </div>

      <mat-list>
        <mat-list-item *ngFor="let project of projects" class="project-selection-sidebar-item"
                       (click)="selectedProject = project"
                       [class.selected]="project.id == selectedProject?.id">
          <app-project-view-header [project]="project"
                                   [iconState]="stateInfo?.get(project.id)?.actualState()"
                                   [pauseReason]="stateInfo?.get(project.id)?.pauseReason"
                                   [progress]="stateInfo?.get(project.id)?.stageProgress"
                                   [running]="stateInfo?.get(project.id)?.isRunning()">
          </app-project-view-header>
        </mat-list-item>
      </mat-list>
      <div style="padding-top: 2.5em">
      </div>
      <div style="position: sticky; margin-left: calc(100% - 4em); bottom: 1em">
        <button mat-mini-fab color="primary" (click)="createNewProject()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </mat-card>
  </div>

  <div *ngIf="projects != null" class="project-selection-container">
    <mat-card class="project-selection">
      <div *ngIf="selectedProject == null" class="none-defined-yet">
        <i>No project selected</i>
      </div>

      <ng-container *ngIf="selectedProject != null">
        <app-project-view
          [project]="selectedProject"
          [state]="stateInfo?.get(selectedProject.id)"
          (deleted)="onDeleted(selectedProject)">
        </app-project-view>
      </ng-container>
    </mat-card>
  </div>
</div>
