<div>
  <h1>Projects</h1>

  <div class="flex-grow-row control-button-row">
    <div class="flex-grow"></div>
    <button class="create-button" mat-raised-button color="primary"
            (click)="createNewProject()">Create Project
    </button>
  </div>

  <div class="project-list-replacement">
    <i *ngIf="projects == null">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </i>
    <i *ngIf="projects != null && projects.length == 0">There are no projects yet yet</i>
  </div>


  <mat-expansion-panel
    *ngFor="let project of projects"
    (afterCollapse)="stopLoading(project)"
    (afterExpand)="startLoading(project)">

    <mat-expansion-panel-header>
      <span style="display: flex; align-items: center">
        <app-state-icon #icon [state]="project.state" animation="true"></app-state-icon>
        {{project.name}}
      </span>
    </mat-expansion-panel-header>

    <app-project-view (state)="icon.state = $event"  [project]="project">

    </app-project-view>

  </mat-expansion-panel>


</div>
