<div>
  <h1>Projects</h1>

  <div class="project-list-replacement">
    <i *ngIf="projects == null">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </i>
    <i *ngIf="projects != null && projects.length == 0">There are no projects yet yet</i>
  </div>

  <div *ngIf="this.projects != null" class="flex-grow-row control-button-row">
    <div class="flex-grow"></div>
    <button class="create-button" mat-raised-button color="primary"
            (click)="createNewProject()">Create Project
    </button>
  </div>

  <mat-expansion-panel
    *ngFor="let project of projects"
    (afterCollapse)="stopLoading(project)"
    (afterExpand)="startLoading(project)">

    <mat-expansion-panel-header>
      <mat-panel-title>
        <app-state-icon #icon animation="true"></app-state-icon>
        {{project.name}}
      </mat-panel-title>
      <mat-panel-description style="flex-grow: 0">
        {{view.pauseReason}}
        <mat-progress-bar *ngIf="view.progress != null && view.isRunning()" [value]="view.progress" style="width: 10em; margin: auto 1em"></mat-progress-bar>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-project-view #view (state)="icon.state = $event" [project]="project"></app-project-view>

  </mat-expansion-panel>


</div>
