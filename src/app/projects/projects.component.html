<mat-drawer-container *ngIf="projects != null" class="vmenu-host height">
  <mat-drawer #drawer class="vmenu-selection-container"
              mode="side"
              [opened]="true"
  >
    <mat-card class="vmenu-selection">
      <div style="position: sticky; top: 1em; z-index: 1">
        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title class="mat-icon-container-auto-align-label">
                <mat-icon>filter_list</mat-icon>
                <label>Filter</label>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <app-tag-filter
              #filter
              [availableTags]="api.cachedTags"
              [projects]="projects"
              (filtered)="projectsFiltered = $event"
              (projectsGroups)="this.projectsGroups = $event"
            ></app-tag-filter>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <div style="padding-top: 1.5em">
      </div>

      <app-projects-view
        [projects]="projects"
        [projectsFiltered]="projectsFiltered"
        [projectsGroups]="projectsGroups"
        [selectedProject]="selectedProject"
        [stateInfo]="stateInfo"
        [filter]="filter"
        [router]="router"
        [route]="route">
      </app-projects-view>

      <div style="padding-top: 2.5em"></div>

      <div class="sticky-button-group">
        <button mat-mini-fab color="primary" (click)="createNewProject()">
          <mat-icon matTooltip="Create new Project">add</mat-icon>
        </button>
        <button mat-mini-fab color="accent" (click)="openProjectDiskUsageDialog()">
          <mat-icon matTooltip="Project Diskusage">insert_chart_outlined</mat-icon>
        </button>
        <button mat-mini-fab color="warn" (click)="openGroupActions()">
          <mat-icon matTooltip="Group Actions">play_arrow</mat-icon>
        </button>

        <button class="hide-projects-button" mat-mini-fab color="white" (click)="drawer.toggle()">
          <mat-icon matTooltip="Hide projects">keyboard_arrow_left</mat-icon>
        </button>
      </div>
    </mat-card>
  </mat-drawer>

  <div *ngIf="projects != null" class="vmenu-container">
    <mat-card class="vmenu-container-selection">
      <div *ngIf="selectedProject == null" class="none-defined-yet">
        <i>No project selected</i>
      </div>

      <ng-container *ngIf="selectedProject != null">
        <app-project-view style="overflow: hidden"
          [project]="selectedProject"
          [state]="stateInfo?.get(selectedProject.id)"
          (deleted)="onDeleted(selectedProject)">
        </app-project-view>
      </ng-container>
    </mat-card>

    <button class="show-projects-button" *ngIf="!drawer.opened" mat-mini-fab color="white" (click)="drawer.toggle()">
      <mat-icon matTooltip="Show Projects">keyboard_arrow_right</mat-icon>
    </button>

  </div>
</mat-drawer-container>
